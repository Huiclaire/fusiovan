<div class="card-wrapper">
<div data-controller="wizard">
  <%= simple_form_for(@build) do |f|  %>
    <div data-wizard-target="step">
      <%= f.simple_fields_for :build_appliances do |fa| %>
        <div class="create-page-header">
          <h2><%= "Select your fridge" %></h2>
        </div>
        <br>
        <fieldset class="mb-3 radio_buttons optional build_build_appliances_appliance_id">
          <div class="category-wrapper">
            <input type="hidden" name="build[build_appliances_attributes][0][appliance_id]" value="" autocomplete="off">

            <% Appliance.where(kind: "fridge").each do |appliance| %>
              <div class="category-item">
                <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= appliance.id %>" name="build[build_appliances_attributes][0][appliance_id]" id="build_build_appliances_attributes_0_appliance_id_<%= appliance.id %>">
                <label
                  class="form-check-label collection_radio_buttons"
                  for="build_build_appliances_attributes_0_appliance_id_<%= appliance.id %>">
                  <%= render "shared/appliance_card_redesigned", appliance: appliance %>
                </label>
              </div>
            <% end %>
          </div>
        </fieldset>
        <%= fa.input :use_hours,
                     :label => "How many hours a day will you use your fridge?",
                     :collection => 1..12,
                     required: false,
                     wrapper_html: { class: "form-wrapper"},
                     label_html: {class: "form-label"},
                     input_html: {class: "form-input"},
                     wrapper_html: { class: "form-wrapper"},
                     label_html: {class: "form-label"},
                     input_html: {class: "form-input"} %>

      <% end %>
      <div class="form-buttons">
      <%= button_tag "Next", type: "button", class:"btn-first",
        data: {
          action: "click->wizard#goToNext",
          next_step: "1"
        } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
      <%= f.simple_fields_for :build_appliances do |fa| %>
        <div class="create-page-header">
          <h2><%= "Select your lights" %></h2>
        </div>
        <br>
        <fieldset class="mb-3 radio_buttons optional build_build_appliances_appliance_id">
          <div class="category-wrapper">
            <input type="hidden" name="build[build_appliances_attributes][1][appliance_id]" value="" autocomplete="off">

            <% Appliance.where(kind: "lights").each do |appliance| %>
              <div class="category-item">
                <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= appliance.id %>" name="build[build_appliances_attributes][1][appliance_id]" id="build_build_appliances_attributes_1_appliance_id_<%= appliance.id %>">
                <label
                  class="form-check-label collection_radio_buttons"
                  for="build_build_appliances_attributes_1_appliance_id_<%= appliance.id %>">
                  <%= render "shared/appliance_card_redesigned", appliance: appliance %>
                </label>
              </div>
            <% end %>
          </div>
        </fieldset>
        <%= fa.input :use_hours,
                     :label => "How many hours a day will you use your lights?",
                     :collection => 1..12,
                     required: false,
                     wrapper_html: { class: "form-wrapper"},
                     label_html: {class: "form-label"},
                     input_html: {class: "form-input"} %>
      <% end %>
      <div class="form-buttons">
      <%= button_tag "Previous", type: "button", class:"btn-ghost",
        data: {
          action: "click->wizard#goToPrevious",
          previous_step: "1"
        } %>

      <%= button_tag "Next", type: "button", class:"btn-first",
        data: {
          action: "click->wizard#goToNext",
          next_step: "2"
        } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
      <%= f.simple_fields_for :build_appliances do |fa| %>
        <div class="create-page-header">
            <h2><%= "Select your fan" %></h2>
        </div>
        <br>
        <fieldset class="mb-3 radio_buttons optional build_build_appliances_appliance_id">
          <div class="category-wrapper">
            <input type="hidden" name="build[build_appliances_attributes][2][appliance_id]" value="" autocomplete="off">

            <% Appliance.where(kind: "fan").each do |appliance| %>
              <div class="category-item">
                <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= appliance.id %>" name="build[build_appliances_attributes][2][appliance_id]" id="build_build_appliances_attributes_2_appliance_id_<%= appliance.id %>">
                <label
                  class="form-check-label collection_radio_buttons"
                  for="build_build_appliances_attributes_2_appliance_id_<%= appliance.id %>">
                  <%= render "shared/appliance_card_redesigned", appliance: appliance %>
                </label>
              </div>
            <% end %>
          </div>
        </fieldset>
        <%= fa.input :use_hours,
                    :label => "How many hours a day will you use your fan?",
                    :collection => 1..12,
                    required: false,
                    wrapper_html: { class: "form-wrapper"},
                    label_html: {class: "form-label"},
                    input_html: {class: "form-input"},
                    wrapper_html: { class: "form-wrapper"},
                    label_html: {class: "form-label"},
                    input_html: {class: "form-input"}  %>
      <% end %>

      <div class="form-buttons">
      <%= button_tag "Previous", type: "button", class:"btn-ghost",
        data: {
          action: "click->wizard#goToPrevious",
          previous_step: "2"
        } %>

      <%= button_tag "Next", type: "button", class:"btn-first",
        data: {
          action: "click->wizard#goToNext",
          next_step: "3"
        } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
      <%= f.simple_fields_for :build_appliances do |fa| %>
        <div class="create-page-header">
            <h2><%= "Select your water pump" %></h2>
        </div>
        <br>
        <fieldset class="mb-3 radio_buttons optional build_build_appliances_appliance_id">
          <div class="category-wrapper">
            <input type="hidden" name="build[build_appliances_attributes][3][appliance_id]" value="" autocomplete="off">

            <% Appliance.where(kind: "pump").each do |appliance| %>
              <div class="category-item">
                <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= appliance.id %>" name="build[build_appliances_attributes][3][appliance_id]" id="build_build_appliances_attributes_3_appliance_id_<%= appliance.id %>">
                <label
                  class="form-check-label collection_radio_buttons"
                  for="build_build_appliances_attributes_3_appliance_id_<%= appliance.id %>">
                  <%= render "shared/appliance_card_redesigned", appliance: appliance %>
                </label>
              </div>
            <% end %>
          </div>
        </fieldset>
        <%= fa.input :use_hours,
                    :label => "How many hours a day will you use your fan?",
                    :collection => 1..12,
                    required: false,
                    wrapper_html: { class: "form-wrapper"},
                    label_html: {class: "form-label"},
                    input_html: {class: "form-input"} %>
      <% end %>

      <div class="form-buttons">
        <%= button_tag "Previous", type: "button", class:"btn-ghost",
          data: {
            action: "click->wizard#goToPrevious",
            previous_step: "3"
          } %>

        <%= button_tag "Next", type: "button", class:"btn-first",
          data: {
            action: "click->wizard#goToNext",
            next_step: "4"
          } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
      <%= f.simple_fields_for :build_appliances do |fa| %>
        <div class="create-page-header">
            <h2><%= "Select your 12V charger" %></h2>
        </div>
        <br>
        <fieldset class="mb-3 radio_buttons optional build_build_appliances_appliance_id">
          <div class="category-wrapper">
            <input type="hidden" name="build[build_appliances_attributes][4][appliance_id]" value="" autocomplete="off">

            <% Appliance.where(kind: "charger").each do |appliance| %>
              <div class="category-item">
                <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= appliance.id %>" name="build[build_appliances_attributes][4][appliance_id]" id="build_build_appliances_attributes_4_appliance_id_<%= appliance.id %>">
                <label
                  class="form-check-label collection_radio_buttons"
                  for="build_build_appliances_attributes_4_appliance_id_<%= appliance.id %>">
                  <%= render "shared/appliance_card_redesigned", appliance: appliance %>
                </label>
              </div>
            <% end %>
          </div>
        </fieldset>
        <%= fa.input :use_hours,
                    :label => "How many hours a day will you use your 12V charger?",
                    :collection => 1..12,
                    required: false,
                    wrapper_html: { class: "form-wrapper"},
                    label_html: {class: "form-label"},
                    input_html: {class: "form-input"} %>
      <% end %>

    <div class="form-buttons">
        <%= button_tag "Previous", type: "button", class:"btn-ghost",
          data: {
            action: "click->wizard#goToPrevious",
            previous_step: "4"
          } %>

        <%= button_tag "Next", type: "button", class:"btn-first",
          data: {
            action: "click->wizard#goToNext",
            next_step: "5"
          } %>
      </div>
    </div>

      <div data-wizard-target="step" class="d-none">
      <%= f.simple_fields_for :build_appliances do |fa| %>
        <div class="create-page-header">
            <h2><%= "Select your Inverter" %></h2>
        </div>
        <br>
        <fieldset class="mb-3 radio_buttons optional build_build_appliances_appliance_id">
          <div class="category-wrapper">
            <input type="hidden" name="build[build_appliances_attributes][5][appliance_id]" value="" autocomplete="off">

            <% Appliance.where(kind: "inverter").each do |appliance| %>
              <div class="category-item">
                <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= appliance.id %>" name="build[build_appliances_attributes][5][appliance_id]" id="build_build_appliances_attributes_5_appliance_id_<%= appliance.id %>">
                <label
                  class="form-check-label collection_radio_buttons"
                  for="build_build_appliances_attributes_5_appliance_id_<%= appliance.id %>">
                  <%= render "shared/appliance_card_redesigned", appliance: appliance %>
                </label>
              </div>
            <% end %>
          </div>
        </fieldset>
        <%= fa.input :use_hours,
                    :label => "How many hours a day will you use your Inverter?",
                    :collection => 1..12,
                    required: false,
                    wrapper_html: { class: "form-wrapper"},
                    label_html: {class: "form-label"},
                    input_html: {class: "form-input"} %>
      <% end %>

    <div class="form-buttons">
        <%= button_tag "Previous", type: "button", class:"btn-ghost",
          data: {
            action: "click->wizard#goToPrevious",
            previous_step: "5"
          } %>

        <%= button_tag "Next", type: "button", class:"btn-first",
          data: {
            action: "click->wizard#goToNext",
            next_step: "6"
          } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
    <div class="create-page-header">
      <h2><%= "Select your battery" %></h2>
    </div>
    <br>
    <fieldset class="mb-3 radio_buttons optional build_battery">
      <div class="category-wrapper">
        <input type="hidden" name="build[battery_id]" value="" autocomplete="off">
        <% Battery.all.each do |battery| %>
          <div class="category-item">
            <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= battery.id %>" name="build[battery_id]" id="build_battery_id_<%= battery.id %>">
            <label
              class="form-check-label collection_radio_buttons"
              for="build_battery_id_<%= battery.id %>">
              <%= render "shared/battery_card_redesigned", battery: battery %>
            </label>
           </div>
          <% end %>
        </div>
      </fieldset>

    <div class="form-buttons">
        <%= button_tag "Previous", type: "button", class:"btn-ghost",
          data: {
            action: "click->wizard#goToPrevious",
            previous_step: "6"
          } %>

        <%= button_tag "Next", type: "button", class:"btn-first",
          data: {
            action: "click->wizard#goToNext",
            next_step: "7"
          } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
    <div class="create-page-header">
        <h2><%= "Select your solar panel" %></h2>
    </div>
    <br>
    <fieldset class="mb-3 radio_buttons optional build_solar_panel">
      <div class="category-wrapper">
        <input type="hidden" name="build[solar_panel_id]" value="" autocomplete="off">
        <% SolarPanel.all.each do |solar_panel| %>
          <div class="category-item">
            <input class="form-check-input radio_buttons optional category-selector" type="radio" value="<%= solar_panel.id %>" name="build[solar_panel_id]" id="build_solar_panel_id_<%= solar_panel.id %>">
            <label
              class="form-check-label collection_radio_buttons"
              for="build_solar_panel_id_<%= solar_panel.id %>">
              <%= render "shared/solar_panel_card_redesigned", solar_panel: solar_panel %>
            </label>
           </div>
          <% end %>
        </div>
      </fieldset>

    <div class="form-buttons">
        <%= button_tag "Previous", type: "button", class:"btn-ghost",
          data: {
            action: "click->wizard#goToPrevious",
            previous_step: "7"
          } %>

        <%= button_tag "Next", type: "button", class:"btn-first",
          data: {
            action: "click->wizard#goToNext",
            next_step: "8"
          } %>
      </div>
    </div>

    <div data-wizard-target="step" class="d-none">
    <div class="create-page-header">
        <h2><%= "Let's wrap up..." %></h2>
    </div>
    <div class="create-final-image">
      <div class="create-image">
      <%=image_tag "final01.jpg", alt: "create image" %>
      </div> <%# create final image %>
      <br>
      <div class="create-final-wrapper">
        <div class="gears">
              <%=image_tag "gears.gif", alt: "gears image" %>
        </div>
        <%= f.input :name,
                    :label => "Name your new build!",
                    required: false,
                    wrapper_html: { class: "form-wrapper-final"},
                    label_html: {class: "form-label-final"},
                    input_html: {class: "form-input-final"} %>

          <div class="form-buttons-final">
            <%= button_tag "Previous", type: "button", class:"btn-ghost",
            data: {
              action: "click->wizard#goToPrevious",
            previous_step: "8"
            } %>
            <%= f.button :submit, class: "btn-first" %>
          </div>
      </div> <%# create final wrapper %>
  <%# </div> %>
  </div> <%# create final image %>
  <% end %>
  </div>
</div>
